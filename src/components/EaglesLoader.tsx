"use client"

import React, { useState, useEffect } from 'react'
import { motion, AnimatePresence } from 'framer-motion'

const pathVariants = {
  hidden: { 
    pathLength: 0, 
    fill: "rgba(255, 255, 255, 0)",
    stroke: "rgba(255, 255, 255, 1)",
  },
  visible: { 
    pathLength: 1,
    fill: "rgba(255, 255, 255, 1)",
    stroke: "rgba(255, 255, 255, 1)",
    transition: { 
      pathLength: { duration: 2.5, ease: "easeInOut" },
      fill: { delay: 1.5, duration: 1.5, ease: "easeIn" },
      stroke: { duration: 2.5, ease: "easeInOut" }
    }
  }
}

const containerVariants = {
  hidden: { opacity: 0 },
  visible: { 
    opacity: 1,
    transition: { duration: 0.5, ease: "easeOut" }
  },
  exit: { 
    opacity: 0,
    transition: { duration: 1, ease: "easeInOut" }
  }
}

const meshVariants = {
  hidden: { opacity: 0, scale: 0.95 },
  visible: { 
    opacity: 1, 
    scale: 1,
    transition: { duration: 1, ease: "easeOut" }
  }
}

export default function EaglesLoader() {
  const [isLoading, setIsLoading] = useState(true)

  useEffect(() => {
    const timer = setTimeout(() => {
      setIsLoading(false)
    }, 5000) // Adjust this time as needed

    return () => clearTimeout(timer)
  }, [])

  return (
    <AnimatePresence>
      {isLoading && (
        <motion.div 
          className="fixed inset-0 w-screen h-screen bg-black overflow-x-hidden flex items-center justify-center z-50 overflow-hidden"
          variants={containerVariants}
          initial="hidden"
          animate="visible"
          exit="exit"
        >
          {/* Fixed Small Square SVG Mesh Background */}
          <div className="absolute inset-0 w-full h-full opacity-20">
            <svg width="100%" height="100%">
              <defs>
                <pattern id="smallSquareMesh" x="0" y="0" width="20" height="20" patternUnits="userSpaceOnUse">
                  <path d="M 20 0 L 0 0 0 20" fill="none" stroke="rgba(255,255,255,0.5)" strokeWidth="0.5"/>
                </pattern>
              </defs>
              <rect width="100%" height="100%" fill="url(#smallSquareMesh)" />
            </svg>
          </div>

          {/* Animated Mesh Background */}
          <motion.div 
            className="absolute inset-0 w-[200%] h-[200%]"
            variants={meshVariants}
            initial="hidden"
            animate="visible"
            style={{
              backgroundImage: `
                linear-gradient(to right, rgba(255,255,255,0.03) 1px, transparent 1px),
                linear-gradient(to bottom, rgba(255,255,255,0.03) 1px, transparent 1px)
              `,
              backgroundSize: 'clamp(20px, 4vw, 40px) clamp(20px, 4vw, 40px)',
              transform: 'translate(-25%, -25%)',
            }}
          >
            <motion.div
              animate={{
                x: [0, -50],
                y: [0, -50],
              }}
              transition={{
                repeat: Infinity,
                repeatType: "reverse",
                duration: 20,
                ease: "linear",
              }}
              className="w-full h-full"
            />
          </motion.div>

          <motion.div
            className="relative z-10 w-full max-w-[90vw] md:max-w-[70vw] lg:max-w-[545px]"
            initial={{ scale: 0.8, opacity: 0 }}
            animate={{ scale: 1, opacity: 1 }}
            transition={{ duration: 0.8, delay: 0.2, ease: "easeOut" }}
          >
            <svg
              width="100%"
              height="100%"
              viewBox="0 0 545 124"
              fill="none"
              xmlns="http://www.w3.org/2000/svg"
              preserveAspectRatio="xMidYMid meet"
            >
              <motion.path
                d="M79.6289 2.29346C79.2969 7.49528 78.9925 12.6418 78.7158 17.7329C78.4391 22.8241 78.0794 27.9705 77.6367 33.1724L42.4414 34.9985L41.6113 45.4575H66.3477L64.5215 71.1899L39.6191 72.02L38.7891 84.1392H59.375H73.9844C73.6523 90.2264 73.2926 96.286 72.9053 102.318C72.5732 108.294 72.2689 114.299 71.9922 120.331L0.439453 121.991L3.0957 2.29346H79.6289ZM188.907 114.852L147.735 120.165L142.755 101.405H123.829L119.679 120.165L77.3445 116.014L110.382 5.44775L156.534 3.12354L188.907 114.852ZM139.766 76.0044L133.458 47.1177L127.315 76.0044H139.766ZM290.548 103.397C287.948 106.662 284.738 109.512 280.92 111.947C277.101 114.382 273.006 116.402 268.634 118.006C264.263 119.611 259.78 120.829 255.187 121.659C250.594 122.433 246.222 122.821 242.072 122.821C234.048 122.821 226.66 121.465 219.909 118.753C213.157 116.042 207.319 112.279 202.394 107.464C197.524 102.595 193.706 96.8117 190.939 90.1157C188.172 83.4198 186.789 76.1151 186.789 68.2017C186.789 62.1698 187.48 56.3039 188.864 50.604C190.247 44.9041 192.212 39.564 194.757 34.5835C197.358 29.603 200.513 25.0376 204.22 20.8872C207.928 16.7368 212.134 13.1675 216.837 10.1792C221.541 7.19092 226.688 4.89437 232.277 3.28955C237.921 1.62939 243.898 0.799316 250.207 0.799316C252.586 0.799316 255.132 0.909993 257.843 1.13135C260.555 1.29736 263.239 1.62939 265.895 2.12744C268.607 2.57015 271.235 3.20654 273.781 4.03662C276.326 4.8667 278.651 5.89046 280.754 7.10791L278.429 38.8169C275.33 37.6548 272.121 36.88 268.8 36.4927C265.535 36.05 262.326 35.8286 259.171 35.8286C254.744 35.8286 250.594 36.4373 246.72 37.6548C242.902 38.8169 239.554 40.5601 236.676 42.8843C233.854 45.2085 231.613 48.1138 229.953 51.6001C228.293 55.0864 227.462 59.1261 227.462 63.7192C227.462 66.5968 227.85 69.3914 228.625 72.103C229.399 74.7593 230.561 77.1388 232.111 79.2417C233.716 81.2892 235.68 82.9494 238.004 84.2222C240.384 85.495 243.123 86.1313 246.222 86.1313C248.325 86.1313 250.483 85.8547 252.697 85.3013C254.966 84.7479 256.903 83.8071 258.507 82.479L258.839 76.0044L238.918 75.6724L239.914 50.77C248.159 50.4933 256.405 50.272 264.65 50.106C272.895 49.8846 281.196 49.6079 289.552 49.2759L290.548 103.397ZM371.438 77.9966L367.952 114.852L298.059 120.331L300.715 1.79541H343.879L337.737 77.9966H371.438ZM455.648 2.29346C455.316 7.49528 455.011 12.6418 454.735 17.7329C454.458 22.8241 454.098 27.9705 453.655 33.1724L418.46 34.9985L417.63 45.4575H442.366L440.54 71.1899L415.638 72.02L414.808 84.1392H435.394H450.003C449.671 90.2264 449.311 96.286 448.924 102.318C448.592 108.294 448.288 114.299 448.011 120.331L376.458 121.991L379.114 2.29346H455.648ZM544.34 79.4907C544.34 87.0721 543.012 93.6297 540.355 99.1636C537.755 104.642 534.158 109.18 529.564 112.777C525.027 116.319 519.687 118.947 513.544 120.663C507.457 122.323 500.899 123.153 493.871 123.153C491.16 123.153 488.171 122.793 484.906 122.074C481.697 121.354 478.432 120.469 475.111 119.417C471.791 118.311 468.581 117.149 465.482 115.931C462.439 114.658 459.727 113.469 457.348 112.362L461 79.8228C465.704 82.645 470.906 84.8032 476.605 86.2974C482.361 87.7362 488.005 88.4556 493.539 88.4556C494.59 88.4556 495.863 88.4279 497.357 88.3726C498.852 88.2619 500.263 88.0129 501.591 87.6255C502.974 87.1828 504.136 86.5464 505.077 85.7163C506.018 84.8862 506.488 83.6965 506.488 82.147C506.488 81.0955 506.156 80.2101 505.492 79.4907C504.828 78.716 503.97 78.1073 502.919 77.6646C501.868 77.1665 500.678 76.8068 499.35 76.5854C498.021 76.3088 496.721 76.1151 495.448 76.0044C494.175 75.8937 492.986 75.8384 491.879 75.8384C490.772 75.8384 489.887 75.8384 489.223 75.8384C484.464 75.8384 480.119 75.0913 476.19 73.5972C472.317 72.103 468.969 70.0002 466.146 67.2886C463.38 64.5216 461.221 61.2013 459.672 57.3276C458.122 53.3986 457.348 49.0545 457.348 44.2954C457.348 37.7655 458.648 31.9272 461.249 26.7808C463.905 21.5789 467.419 17.1795 471.791 13.5825C476.218 9.93018 481.282 7.13558 486.981 5.19873C492.681 3.26188 498.575 2.29346 504.662 2.29346C507.374 2.29346 510.168 2.40413 513.046 2.62549C515.924 2.7915 518.773 3.12354 521.596 3.62158C524.473 4.11963 527.268 4.75602 529.979 5.53076C532.691 6.3055 535.264 7.27393 537.699 8.43604L534.545 42.1372C530.782 40.8644 526.825 39.813 522.675 38.9829C518.58 38.0975 514.568 37.6548 510.639 37.6548C509.919 37.6548 508.979 37.6825 507.816 37.7378C506.71 37.7378 505.52 37.8208 504.247 37.9868C503.03 38.0975 501.785 38.2912 500.512 38.5679C499.239 38.8446 498.104 39.2319 497.108 39.73C496.112 40.1727 495.31 40.7814 494.701 41.5562C494.092 42.3309 493.816 43.244 493.871 44.2954C493.926 45.5129 494.369 46.4536 495.199 47.1177C496.085 47.7817 497.191 48.2798 498.52 48.6118C499.903 48.8885 501.397 49.0269 503.002 49.0269C504.662 49.0269 506.295 48.9992 507.899 48.9438C509.504 48.8332 510.998 48.7502 512.382 48.6948C513.765 48.5841 514.9 48.5565 515.785 48.6118C520.212 48.8885 524.197 49.8293 527.738 51.4341C531.28 53.0389 534.268 55.1694 536.703 57.8257C539.193 60.4819 541.075 63.6639 542.348  67.3716C543.676 71.0239 544.34 75.0636 544.34 79.4907Z"
                variants={pathVariants}
                initial="hidden"
                animate="visible"
                strokeWidth="2"
                className="drop-shadow-[0_0_10px_rgba(255,255,255,0.7)]"
              />
            </svg>
          </motion.div>
        </motion.div>
      )}
    </AnimatePresence>
  )
}